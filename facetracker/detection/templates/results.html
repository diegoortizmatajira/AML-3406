{% extends "home.html" %} {% load static %} {% block script %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.5.0/knockout-min.js"></script>
<script type="text/javascript">
  function ViewModel() {
    var self = this;
    self.ImageBase64 = ko.observable();
    self.ImageType = ko.observable();
    self.ImageSrcName = ko.computed(function () {
      return "data:" + self.ImageType() + "base64," + self.ImageBase64();
    });
    self.Detail = ko.observable();
    self.Update = function () {
      $.ajax("/detection/camera_endpoint", {
        type: "GET",
        dataType: "json",
        success: function (allData) {
          self.ImageBase64(allData.ImageBase64);
          self.ImageType(allData.ImageType);
          self.Detail(allData.Detail);
        },
      });
    };
  }
  $(document).ready(function () {
    var dataModel = new ViewModel();
    window.setInterval(dataModel.Update, 200);
    ko.applyBindings(dataModel);
  });
</script>
{% endblock %} {% block body %}
<div class="container">
  <div class="row">
    <div class="col-sm">
      <img
        data-bind="attr:{src:ImageSrcName}"
        style="height: 100%; width: 100%; object-fit: contain"
      />
    </div>
    <div class="col-sm">
      <textarea
        data-bind="value:Detail"
        style="height: 100%; width: 100%; object-fit: contain"
      />
    </div>
  </div>
</div>

{% endblock %}
